<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Admin </title>
    <meta name="description" content="这是一个 index 页面">
    <meta name="keywords" content="index">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="icon" type="image/png" href="<?php echo base_url('/style/root');?>/i/favicon.png">
    <link rel="apple-touch-icon-precomposed" href="<?php echo base_url('/style/root');?>/i/app-icon72x72@2x.png">
    <meta name="apple-mobile-web-app-title" content="" />
    <link rel="stylesheet" href="<?php echo base_url('/style/root');?>/css/amazeui.min.css" />
    <link rel="stylesheet" href="<?php echo base_url('/style/root');?>/css/amazeui.datatables.min.css" />
    <link rel="stylesheet" href="<?php echo base_url('/style/root');?>/css/app.css">
    <!-- <link rel="stylesheet" href="<?php echo base_url('/style/root');?>/css/admin.css"> -->
    <script src="<?php echo base_url('/style/root');?>/js/jquery.min.js"></script>

</head>
<style>
    .bannerView{
        width: 100px;
    }
    .areachoose select{
        width: 30%!important;
    }
    .w-e-toolbar .w-e-menu {
        position: relative;
        text-align: center;
        padding: 5px 5px;
        cursor: pointer;
        font-size: 1rem;
    }
</style>
<body data-type="index">
    <script src="<?php echo base_url('/style/root');?>/js/theme.js"></script>
    <div class="am-g tpl-g">
        <?php $this->load->view('header.html');?>

        <!-- 内容区域 -->
        <div class="tpl-content-wrapper">
            <div class="row-content am-cf">
                <div class="row">
                    <div class="am-u-sm-12 am-u-md-12 am-u-lg-12">
                        <div class="widget am-cf">
                            <div class="widget-head am-cf">
                                <div class="widget-title am-cf">编辑文章</div>
                           
                            </div>
                            <div class="widget-body  am-fr">
                                <form class="am-form tpl-form-border-form tpl-form-border-br" action="<?php echo site_url('/Wechat/editArticle');?>" method="post">
                                    <div class="am-form-group">
                                        <label for="user-name" class="am-u-sm-3 am-form-label">文章标题</label>
                                        <div class="am-u-sm-9">
                                            <input type="text" class="tpl-form-input" id="user-name" name="title" value="<?php echo $info['title'];?>" placeholder="请输入文章标题">
                                        </div>
                                    </div>
  									<div class="am-form-group">
                                        <label for="user-name" class="am-u-sm-3 am-form-label">文章内容</label>
                                        <div class="am-u-sm-9">
                                           <div class="editor" id="editor"><?php echo file_get_contents($info["newLink"]);?> </div>
                                           <textarea id='content' name="content" style="width:100%; height:200px;display: none;" > </textarea>
                                        </div>
                                    </div>

                                    <div class="am-form-group">
                                        <div class="am-u-sm-9 am-u-sm-push-3">
                                            <input type="hidden" name="id" value="<?php echo $info['id'];?>">
                                            <button type="reset" class="am-btn">取消</button><!-- 不用保存修改 -->
                                            <button type="submit" class="am-btn am-btn-primary tpl-btn-bg-color-success ">保存</button> <!-- 并保存修改 -->
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!-- 编辑弹框 -->
    <div class="am-modal am-modal-confirm" tabindex="-1" id="my-update-confirm">
        <div class="am-modal-dialog">
            <div class="am-modal-hd">编辑</div>

            <div class="am-modal-footer">
                <span class="am-modal-btn" data-am-modal-cancel>取消</span>
                <button type="submit" style="padding:0;border:none;background:none;">提交</button>

            </div>
        </div>
    </div>


    <script src="<?php echo base_url('/style/root');?>/js/amazeui.min.js"></script> 
    <script src="<?php echo base_url('/style/root');?>/js/app.js"></script>
    <script src="<?php echo base_url('/style/root');?>/js/area.js"></script>
    <script src="<?php echo base_url('/style/root');?>/js/select.js"></script>
    <script src="<?php echo base_url('/style/root');?>/js/wangEditor.min.js"></script>

    <script type="text/javascript"> 
        $(".doc-form-file").change(function(){
            var objUrl = getObjectURL(this.files[0]) ;
            console.log("objUrl = "+objUrl) ;
            if (objUrl) {
                $(this).parentsUntil('.upimg').find('.bannerView').attr("src", objUrl) ;
            }
        }) ;
        //建立一個可存取到該file的url
        function getObjectURL(file) {
            var url = null ; 
            if (window.createObjectURL!=undefined) { // basic
                url = window.createObjectURL(file) ;
            } else if (window.URL!=undefined) { // mozilla(firefox)
                url = window.URL.createObjectURL(file) ;
            } else if (window.webkitURL!=undefined) { // webkit or chrome
                url = window.webkitURL.createObjectURL(file) ;
            }
            return url ;
        }
        //创建查看编辑器
        var E = window.wangEditor;
      //  var editors =document.getElementsByClassName('editor');
      
        var editor = new E('#editor') 
        var $content = $('#content')
        editor.customConfig.onchange = function (html) {
            // 监控变化，同步更新到 textarea
            $content.val(html)
        }
        //设置图片大小
        editor.customConfig.uploadImgMaxSize = 3 * 1024 * 1024
        // 下面两个配置，使用其中一个即可显示“上传图片”的tab。但是两者不要同时使用！！！
        // editor.customConfig.uploadImgShowBase64 = true   // 使用 base64 保存图片
        editor.customConfig.uploadImgServer = '<?php echo site_url("/Wechat/uploadImg");?>'  // 上传图片到服务器
        editor.customConfig.uploadFileName = 'img'

        editor.create()
        $content.val(editor.txt.html())


        //设置内容  重要
        // editor.txt.html('23')
           
    </script>
</body>

</html>